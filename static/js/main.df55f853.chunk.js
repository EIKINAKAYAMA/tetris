(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{14:function(e,t,r){"use strict";r.r(t);var s=r(10),n=r.n(s),i=r(11),o=r(8),a=r(2),c=r(3),l=r(6),u=r(5),h=r(1),d=r.n(h),f=r(12),b=r.n(f),j=(r(20),r(13)),g=r(0),p=new j.a("G-GB64VYNVM1"),k=12,v=Math.floor(6);function m(e,t,r){return[{figures:[e-2,e-1,e,e+1],color:"lightblue",angle:0,rotatedFigures:[[r[0]-2*t+2,r[1]-t+1,r[2],r[3]+t-1],[r[0]+2*t-2,r[1]+t-1,r[2],r[3]-t+1]]},{figures:[e-1,e,e+t-1,e+t],color:"yellow",angle:0},{figures:[e,e+1,e-1+t,e+t],color:"green",angle:0,rotatedFigures:[[r[0]+t,r[1]+2*t-1,r[2]-t,r[3]-1],[r[0]-t,r[1]-2*t+1,r[2]+t,r[3]+1]]},{figures:[e-1,e,e+t,e+t+1],color:"red",angle:0,rotatedFigures:[[r[0]+2,r[1]+t+1,r[2],r[3]+t-1],[r[0]-2,r[1]-t-1,r[2],r[3]-t+1]]},{figures:[e-1,e+t-1,e+t,e+t+1],color:"blue",angle:0,rotatedFigures:[[r[0]+2,r[1]-t+1,r[2],r[3]+t-1],[r[0]+2*t,r[1]+t+1,r[2],r[3]-t-1],[r[0]-2,r[1]+t-1,r[2],r[3]-t+1],[r[0]-2*t,r[1]-t-1,r[2],r[3]+t+1]]},{figures:[e+1,e+t-1,e+t,e+t+1],color:"orange",angle:0,rotatedFigures:[[r[0]+2*t,r[1]-t+1,r[2],r[3]+t-1],[r[0]-2,r[1]+t+1,r[2],r[3]-t-1],[r[0]-2*t,r[1]+t-1,r[2],r[3]-t+1],[r[0]+2,r[1]-t-1,r[2],r[3]+t+1]]},{figures:[e,e+t-1,e+t,e+t+1],color:"purple",angle:0,rotatedFigures:[[r[0]+t+1,r[1]-t+1,r[2],r[3]+t-1],[r[0]+t-1,r[1]+t+1,r[2],r[3]-t-1],[r[0]-t-1,r[1]+t-1,r[2],r[3]-t+1],[r[0]-t+1,r[1]-t-1,r[2],r[3]+t+1]]}]}var O=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsxs)("p",{children:["Score\xa0\xa0:\xa0\xa0",this.props.score]}),Object(g.jsxs)("p",{children:["Level\xa0\xa0:\xa0\xa0",this.props.level]}),Object(g.jsxs)("p",{children:["\u30ca\u30ab\u30e4\u30de\u30f3\uff1a",Object(g.jsx)("br",{}),this.props.message]}),Object(g.jsxs)("p",{children:["\u52dd\u5229\u5224\u5b9a\uff1a",this.props.judge]})]})}}]),r}(d.a.Component);function x(e){return Object(g.jsx)("td",{className:"block-type-".concat(e.name)})}var y=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"renderSquare",value:function(e){var t=Array(16).fill(null);return Object(g.jsx)(x,{name:t[e]},"table".concat(e))}},{key:"render",value:function(){for(var e=this,t=[],r=m(2,4,k,Array(5).fill(null)),s=(this.props.color?r.filter((function(t){return t.color===e.props.color})):[{figures:[-1]}])[0].figures,n=0;n<2;n++){for(var i=[],o=0;o<4;o++){var a=4*n+o;s.includes(a)?i.push(Object(g.jsx)("td",{className:"block-type-".concat(this.props.color)},"table-td ".concat(a))):i.push(this.renderSquare(a))}t.push(Object(g.jsx)("tr",{className:"table-row",children:i},"table-tr ".concat(n)))}return Object(g.jsx)("table",{className:"board-table",children:Object(g.jsx)("tbody",{children:t})})}}]),r}(d.a.Component),B=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"renderSquare",value:function(e){return Object(g.jsx)(x,{name:this.props.board[e]},"board".concat(e))}},{key:"render",value:function(){for(var e=[],t=2;t<22;t++){for(var r=[],s=0;s<k;s++){var n=t*k+s;n%k===0||n%k===11?r.push(Object(g.jsx)("td",{className:"block-type-wall"},"board-td".concat(n))):this.props.figures.includes(n)?r.push(Object(g.jsx)("td",{className:"block-type-".concat(this.props.color)},"board-td".concat(n))):r.push(this.renderSquare(n))}e.push(Object(g.jsx)("tr",{className:"table-row",children:r},"board-tr".concat(t)))}return Object(g.jsx)("table",{className:"board-table",children:Object(g.jsx)("tbody",{children:e})})}}]),r}(d.a.Component),F=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(e){var s;return Object(a.a)(this,r),(s=t.call(this,e)).state={currentBlock:{figures:[],color:"next",angle:null},nextBlock:s.cleateblock(),histories:[{board:Array(264).fill(null)}],score:0,level:0,message:"",judge:""},window.onkeydown=function(e){null!=s.state.currentBlock&&("ArrowLeft"===e.key?s.moveLeft():"ArrowUp"===e.key?s.rotate():"ArrowRight"===e.key?s.moveRight():"ArrowDown"===e.key&&s.fallblock())},s}return Object(c.a)(r,[{key:"rotate",value:function(){var e=this.state.histories,t=e[e.length-1].board,r=this.state.currentBlock.figures.slice(0),s=[],n=this.state.currentBlock.color,i=this.state.currentBlock.angle,o=270!==i?i+90:0;if("lightblue"===n)if(0===i||180===i)s.push(m(v,k,r)[0].rotatedFigures[0]);else{if(90!==i&&270!==i)return;s.push(m(v,k,r)[0].rotatedFigures[1])}else if("green"===n)if(0===i||180===i)console.log(r),s.push(m(v,k,r)[2].rotatedFigures[0]),console.log(s);else{if(90!==i&&270!==i)return;s.push(m(v,k,r)[2].rotatedFigures[1])}else if("red"===n)if(0===i||180===i)s.push(m(v,k,r)[3].rotatedFigures[0]);else{if(90!==i&&270!==i)return;s.push(m(v,k,r)[3].rotatedFigures[1])}else if("blue"===n)0===i?s.push(m(v,k,r)[4].rotatedFigures[0]):90===i?s.push(m(v,k,r)[4].rotatedFigures[1]):180===i?s.push(m(v,k,r)[4].rotatedFigures[2]):270===i&&s.push(m(v,k,r)[4].rotatedFigures[3]);else if("orange"===n)0===i?s.push(m(v,k,r)[5].rotatedFigures[0]):90===i?s.push(m(v,k,r)[5].rotatedFigures[1]):180===i?s.push(m(v,k,r)[5].rotatedFigures[2]):270===i&&s.push(m(v,k,r)[5].rotatedFigures[3]);else{if("purple"!==n)return;0===i?s.push(m(v,k,r)[6].rotatedFigures[0]):90===i?s.push(m(v,k,r)[6].rotatedFigures[1]):180===i?s.push(m(v,k,r)[6].rotatedFigures[2]):270===i&&s.push(m(v,k,r)[6].rotatedFigures[3])}return s[0].find((function(e){return e%k===0||e%k===11}))||s[0].find((function(e){return null!==t[e-1]}))?null:void this.setState({currentBlock:{figures:s[0],color:n,angle:o}})}},{key:"moveLeft",value:function(){var e=this.state.histories,t=e[e.length-1].board,r=this.state.currentBlock.figures.slice(0);if(!r.find((function(e){return e%k===1})))return r.find((function(e){return null!==t[e-1]}))?null:void this.setState({currentBlock:{figures:r.map((function(e){return e-1})),color:this.state.currentBlock.color,angle:this.state.currentBlock.angle}})}},{key:"moveRight",value:function(){var e=this.state.histories,t=e[e.length-1].board,r=this.state.currentBlock.figures.slice(0);if(!r.find((function(e){return e%k===10})))return r.find((function(e){return null!==t[e+1]}))?null:void this.setState({currentBlock:{figures:r.map((function(e){return e+1})),color:this.state.currentBlock.color,angle:this.state.currentBlock.angle}})}},{key:"fallblock",value:function(){var e=this.state.histories,t=e[e.length-1].board,r=this.state.currentBlock.figures.slice(0),s=r.filter((function(e){return r.find((function(t){return t===e+k}))})),n=r.filter((function(e){return-1===s.indexOf(e)}));if(n.find((function(e){return 264<e+k}))||n.find((function(e){return null!==t[e+k]}))){var i=Math.floor(Math.min.apply(Math,Object(o.a)(r))/k),a=Math.floor(Math.max.apply(Math,Object(o.a)(r))/k);this.fixblock(),this.deleteLine(i,a),this.setState({histories:this.state.histories,currentBlock:{figures:[],color:"next",angle:0}})}else this.setState({currentBlock:{figures:r.map((function(e){return e+k})),color:this.state.currentBlock.color,angle:this.state.currentBlock.angle}})}},{key:"fixblock",value:function(){var e=this.state.histories,t=e[e.length-1].board.slice(),r=this.state.currentBlock.color;this.state.currentBlock.figures.forEach((function(e){t[e]=r})),this.setState({histories:e.concat([{board:t}])})}},{key:"delete",value:function(){for(var e=this.state.histories,t=e[e.length-1].board.slice(0),r=0,s=0;s<22;s++)"delete"===t[k*s]&&(t.splice(k*s,k),r++,Object(o.a)(Array(k)).map((function(){return t.splice(1,0,null)})));this.setState({histories:e.concat([{board:t}]),score:this.state.score+100*r*(1*r)})}},{key:"deleteLine",value:function(e,t){for(var r=this.state.histories,s=r[r.length-1],n=this.state.histories.slice(0,r.length-1),i=s.board.slice(0),o=e;o<=t;o++){i.slice(1+k*o,k*(o+1)-1).some((function(e){return null===e}))||(i.fill(null,k*o,k*(o+1)),i[k*o]="delete")}n.push({board:i}),this.setState({histories:n})}},{key:"getRandomBlock",value:function(){return Math.floor(7*Math.random())}},{key:"cleateblock",value:function(){return m(v,k,Array(5).fill(null))[this.getRandomBlock()]}},{key:"changeInfo",value:function(e,t,r,s,n){clearTimeout(s),null!==n&&(s=setTimeout(this.mainloop.bind(this),n)),this.setState({level:e,message:t,judge:r})}},{key:"mainloop",value:function(){var e=this.state.histories,t=e[e.length-1].board,r=this.state.nextBlock.figures,s=this.state.level;t.includes("delete")&&this.delete();var n=setTimeout(this.mainloop.bind(this),1e3);"next"===this.state.currentBlock.color&&this.setState({currentBlock:this.state.nextBlock,nextBlock:this.cleateblock()}),r.find((function(e){return null!==t[e]}))?this.state.score>=5e3?this.changeInfo(s,"5000\u70b9\u4ee5\u4e0a\u3068\u308b\u3068\u308f\u3002\u3002\u3002 \u3044\u3063\u3071\u3044\u904a\u3093\u3067\u3001\u304f\u308c\u305f\u3093\u3084\u306a\u3001\u3001\u3001\u3042\u308a\u304c\u3068\u3046\uff01\uff01\uff01\u5b8c\u6557\u3084","You are winner",n,null):this.changeInfo(s,"\u304c\u306f\u306f\u306f\u3001100\u5e74\u65e9\u3044\u308f\uff01\u51fa\u76f4\u3057\u3066\u304d\u3093\u3057\u3083\u3044\uff01","You are loser",n,null):this.state.score<100?this.changeInfo(s,"\u3055\u3066\u3001\u304a\u624b\u4e26\u307f\u62dd\u898b\u3055\u305b\u3066\u8cb0\u304a\u3046\u304b","",n,1e3):this.state.score<1e3?this.changeInfo(2,"\u307b\u307b\u3046\uff01\u3084\u308a\u65b9\u306f\u3001\u77e5\u3063\u3066\u3044\u308b\u307f\u305f\u3044\u3060\u306a\u3002\u305d\u308c\u3058\u3083\u884c\u304f\u305e","",n,500):this.state.score<1700?this.changeInfo(3,"\u3080\u3080\u3080\u3001\u306a\u304b\u306a\u304b\u3046\u307e\u3044\u306a","",n,350):this.state.score<3500?this.changeInfo(4,"\u307e\u3001\u307e\u3001\u307e\u3060\u5927\u4e08\u592b\u3060","",n,200):this.state.score<4500?this.changeInfo("MAX","\u3053\u3001\u3053\u306e\u307e\u307e\u3060\u3068\u3001\u8ca0\u3051\u3066\u3057\u307e\u3046\u3002\u3002\u3042\u308c\u3092\u6e96\u5099\u3057\u3088\u3046\u3002\u3002\u3002","",n,150):this.changeInfo("\u5965\u7fa9\u767a\u52d5","\u52dd\u305f\u305b\u306a\u3044\uff01","",n,10),this.fallblock()}},{key:"startGame",value:function(){this.mainloop()}},{key:"componentDidMount",value:function(){this.startGame()}},{key:"render",value:function(){var e=this.state.histories,t=e[e.length-1];return Object(g.jsxs)("div",{className:"wrapper-container",children:[Object(g.jsxs)("div",{className:"title",children:[Object(g.jsx)("h1",{children:"\u6700\u96e3\u30c6\u30c8\u30ea\u30b9 \u201d\u30ca\u30ab\u30e4\u30de\u30f3\u201d"}),Object(g.jsx)("p",{children:"\u30b9\u30b3\u30a25000\u70b9\u4ee5\u4e0a\u3068\u3063\u3066\u3001\u30ca\u30ab\u30e4\u30de\u30f3\u3092\u3076\u3063\u5012\u305b\uff01\uff01\uff01"})]}),Object(g.jsxs)("span",{className:"tetris-container",children:[Object(g.jsx)(B,{board:t.board,color:this.state.currentBlock.color,figures:this.state.currentBlock.figures}),Object(g.jsxs)("span",{className:"tetris-panel-container",children:[Object(g.jsxs)("div",{className:"information",children:[Object(g.jsxs)("div",{className:"tetris-nextBlock",children:[Object(g.jsx)("p",{children:"Next:"}),Object(g.jsx)(y,{color:this.state.nextBlock.color})]}),Object(g.jsx)("div",{className:"score-message",children:Object(g.jsx)(O,{score:this.state.score,level:this.state.level,message:this.state.message,judge:this.state.judge})})]}),Object(g.jsx)("div",{className:"tetris-panel-container-padding"}),Object(g.jsx)("table",{className:"tetris-button-panel",children:Object(g.jsxs)("tbody",{children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{}),Object(g.jsx)("td",{id:"tetris-rotate-button",className:"tetris-button",onMouseDown:this.rotate.bind(this),children:"\u21bb"}),Object(g.jsx)("td",{})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{id:"tetris-move-left-button",className:"tetris-button",onMouseDown:this.moveLeft.bind(this),children:"\u2190"}),Object(g.jsx)("td",{id:"tetris-fall-button",className:"tetris-button",onMouseDown:this.fallblock.bind(this),children:"\u2193"}),Object(g.jsx)("td",{id:"tetris-move-right-button",className:"tetris-button",onMouseDown:this.moveRight.bind(this),children:"\u2192"})]})]})})]})]})]})}}]),r}(d.a.Component);!function(){var e=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.initialize();case 2:b.a.render(Object(g.jsx)(d.a.StrictMode,{children:Object(g.jsx)(F,{})}),document.getElementById("root"));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()()},20:function(e,t,r){}},[[14,1,2]]]);
//# sourceMappingURL=main.df55f853.chunk.js.map